config OBJZ
    bool "Objective-C support"
    select STATIC_INIT_GNU
    default n
    help
      Enable Objective-C language support in Zephyr.

      This option enables the Objective-C compiler and related tools,
      allowing you to write and compile Objective-C code within the Zephyr
      RTOS environment.

      Note: Enabling Objective-C support may increase the size of the
      compiled binaries and could impact performance.

if OBJZ

config OBJZ_USE_CLANG
    bool "Use Clang to compile Objective-C (.m) files"
    default n
    help
      Compile .m files with Clang instead of GCC. GCC remains the
      linker. Enables future ARC support. Requires clang in PATH
      or OBJZ_CLANG_PATH set at cmake configure time.

config OBJZ_MRR
    bool "Manual Retain/Release memory management"
    select THREAD_LOCAL_STORAGE
    default n
    help
      Enable OZObject with retain/release/autorelease and
      OZAutoreleasePool with per-thread pool stack.
      Requires CONFIG_THREAD_LOCAL_STORAGE (auto-selected).

config OBJZ_ARC
    bool "ARC (Automatic Reference Counting) support"
    depends on OBJZ_MRR && OBJZ_USE_CLANG
    default n
    help
      Enable ARC entry points (objc_retain, objc_release,
      objc_storeStrong, etc.). Requires MRR layer and Clang.
      Use objz_compile_objc_arc_sources() or
      objz_target_arc_sources() in CMake to compile .m files
      with -fobjc-arc.

config OBJZ_STATIC_POOLS
    bool "Static allocation pools for ObjC classes"
    default n
    help
      Enable per-class static memory pools using K_MEM_SLAB.
      Use OZ_DEFINE_POOL(ClassName, block_size, count, align)
      in application code to declare pools. Classes without a
      pool fall back to the sys_heap allocator.

config OBJZ_STATIC_POOL_TABLE_SIZE
    int "Maximum number of static pool registrations"
    depends on OBJZ_STATIC_POOLS
    default 16
    help
      Maximum number of OZ_DEFINE_POOL registrations.

config OBJZ_MEM_POOL_SIZE
    int "Objective-Z memory heap pool size"
    default 4096

config OBJZ_MEMORY_POOL_CUSTOM_SECTION
    bool "Objective-Z heap memory custom section"

config OBJZ_MEMORY_POOL_ZEPHYR_REGION
    bool "Objective-Z heap memory region"

config OBJZ_MEMORY_POOL_ZEPHYR_REGION_NAME
    string "Objective-Z heap memory region name"

config OBJZ_CLASS_TABLE_SIZE
    int "Class table size"
    default 32
    help
      Maximum number of Objective-C classes that can be registered.

config OBJZ_CATEGORY_TABLE_SIZE
    int "Category table size"
    default 32
    help
      Maximum number of Objective-C categories that can be registered.

config OBJZ_PROTOCOL_TABLE_SIZE
    int "Protocol table size"
    default 32
    help
      Maximum number of Objective-C protocols that can be registered.

config OBJZ_STATICS_TABLE_SIZE
    int "Static instances table size"
    default 32
    help
      Maximum number of static instance lists that can be registered.

config OBJZ_HASH_TABLE_SIZE
    int "Method hash table size"
    default 512
    help
      Size of the global method hash table. Uses open addressing
      for collision resolution.

config OBJZ_DISPATCH_TABLE_SIZE
    int "Dispatch table size"
    default 64
    help
      Size of the per-class dispatch table. Must be a power of 2.

module = OBJZ
module-str = objz
source "subsys/logging/Kconfig.template.log_config"

endif
